{"version":3,"file":"879.d2fb0736bcecf3f9c879.js","mappings":"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","sources":["webpack://tms-part-3/./src/Components/FormikInputs/ProfileFormikInput.jsx","webpack://tms-part-3/./src/Scenes/Profile/profile.scss?599f","webpack://tms-part-3/./src/Scenes/Profile/Profile.jsx","webpack://tms-part-3/./src/helpers/randomNumber.js","webpack://tms-part-3/./src/api/instance.js","webpack://tms-part-3/./src/api/userApi.js","webpack://tms-part-3/./src/store/selectors/userSelectors.js","webpack://tms-part-3/./src/Scenes/Profile/profile.scss"],"sourcesContent":["import React from 'react';\r\nimport { useField } from 'formik';\r\n\r\nfunction ProfileFormikInput(props) {\r\n\tconst [field, meta, helpers] = useField(props.name);\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<input {...props} {...field} />\r\n\t\t\t{meta.touched && meta.error && (\r\n\t\t\t\t<p className=\"field__error\">{meta.error}</p>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ProfileFormikInput;","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./profile.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./profile.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useState } from \"react\";\r\n\r\nimport { FaUserAlt } from 'react-icons/fa';\r\n\r\nimport { PATH } from \"../../constans/routes.ts\";\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { loggedUserName } from '../../store/selectors/userSelectors';\r\nimport { useDispatch, useSelector } from 'react-redux/es/exports';\r\nimport { Formik, Form } from \"formik\";\r\nimport { fetchUsers } from \"../../api/userApi\";\r\nimport { randomInteger } from \"../../helpers/randomNumber\";\r\nimport ProfileFormikInput from \"../../Components/FormikInputs/ProfileFormikInput\";\r\nimport axios from \"axios\";\r\nimport './profile.scss';\r\n\r\nfunction Profile() {\r\n\r\n    const navigate = useNavigate();\r\n    const dispatch = useDispatch();\r\n    const userName = useSelector(loggedUserName);\r\n    const [handleChangeName, setHandleChangeName] = useState(false);\r\n    const [handleChangePassword, setHandleChangePassword] = useState(false);\r\n\r\n    const logOut = () => {\r\n        dispatch({type: 'userLogOut'});\r\n        navigate(PATH.initialPage);\r\n    }\r\n\r\n    const validateForm = (formValues) => {\r\n        let isPassed = true;\r\n        let errorsObject = {}; \r\n\r\n        if(handleChangeName && !formValues.changeName) {\r\n            isPassed = false;\r\n            errorsObject.changeName = \"Поле не должно быть пустым!\";\r\n        }\r\n        if(handleChangePassword && !formValues.changePass) {\r\n            isPassed = false;\r\n            errorsObject.changePass = \"Поле не должно быть пустым!\";\r\n        }\r\n        if(handleChangeName && formValues.changeName.length > 11) {\r\n            isPassed = false;\r\n            errorsObject.changeName = \"Имя не должно быть длиннее 11 символов\";\r\n        }\r\n\r\n        isPassed = false;\r\n\r\n        if(!isPassed) return errorsObject\r\n    }\r\n\r\n    let initialNameFormValues = {\r\n        changeName: '',\r\n    }\r\n    let initialPasswordFormValues = {\r\n        changePass: '',\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n                <div className=\"profile__wrap\">\r\n                    <FaUserAlt className=\"profile__icon\" />\r\n                    <h2 className=\"profile__username\">{userName}</h2>\r\n                    <div className=\"profile__liked-books\"></div>\r\n                    <ul className=\"profile__menu\">\r\n                        <li className=\"profile__item\" onClick={() => navigate(PATH.bookPage(randomInteger(1, 9)))}>Посоветуйте мне книгу!</li>\r\n\r\n                    <Formik initialValues={initialNameFormValues} validate={validateForm} onSubmit={(formValues) => {\r\n                        fetchUsers().then(response => {\r\n                            const findThisUser = response.data.find(user => user.name === userName);\r\n                            axios.patch(`http://localhost:8000/users/${findThisUser.id}`, {\r\n                                name: formValues.changeName,\r\n                            })\r\n                        })\r\n                        logOut();\r\n                    }}>\r\n                        <Form>\r\n                            <li onClick={() => setHandleChangeName(!handleChangeName)} className=\"profile__item\">Сменить имя</li>\r\n                                <div className={handleChangeName ? \"profile__change\" : \"profile__change--default\"}>\r\n                                    <ProfileFormikInput name='changeName' type='text' placeholder='Новое имя' required className=\"profile__change--login\" />\r\n                                    <button type=\"submit\">Сохранить</button>\r\n                                </div>\r\n                                {!handleChangeName &&\r\n                                    <p className=\"logout__text\">!!!ОСТОРОЖНО, ПРИ ИЗМЕНЕНИИ ИМЕНИ ИЛИ ПАРОЛЯ ВАМ ПРИДЕТЬСЯ ПЕРЕЗАЙТИ В АККАУНТ!!!</p>\r\n                                }\r\n                        </Form>\r\n                    </Formik>\r\n                    <Formik initialValues={initialPasswordFormValues} validate={validateForm} onSubmit={(formValues) => {\r\n                        fetchUsers().then(response => {\r\n                            const findThisUser = response.data.find(user => user.name === userName);\r\n                            axios.patch(`http://localhost:8000/users/${findThisUser.id}`, {\r\n                                password: formValues.changePass,\r\n                            })\r\n                        })\r\n                        logOut();\r\n                    }}>\r\n                        <Form>\r\n                            <li onClick={() => setHandleChangePassword(!handleChangePassword)} className=\"profile__item\">Сменить пароль</li>\r\n                                <div className={handleChangePassword ? \"profile__change\" : \"profile__change--default\"}>\r\n                                    <ProfileFormikInput name='changePass' type='password' placeholder='Новый пороль' required className=\"profile__change--pass\" />\r\n                                    <button type=\"submit\">Сохранить</button>\r\n                                </div>\r\n                                {!handleChangePassword &&\r\n                                    <p className=\"logout__text\">!!!ОСТОРОЖНО, ПРИ ИЗМЕНЕНИИ ИМЕНИ ИЛИ ПАРОЛЯ ВАМ ПРИДЕТЬСЯ ПЕРЕЗАЙТИ В АККАУНТ!!!</p>\r\n                                }\r\n                        </Form>\r\n                    </Formik>\r\n\r\n                        <li className=\"profile__item\" onClick={logOut}>Я хочу выйти с аккаунта!</li>\r\n                        <li className=\"profile__item\"><a target=\"_blank\" href=\"https://t.me/Abz_mijon\">Хочу написать разработчику сайта</a></li>\r\n                    </ul>\r\n                </div>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default Profile;","export const randomInteger = (min, max) => {\r\n    let rand = min + Math.random() * (max - min + 1);\r\n    return Math.round(rand);\r\n}","import axios from 'axios';\r\nimport { store } from '../store/initStore';\r\n\r\nconst fakeServerInstance = axios.create({\r\n\tbaseURL: 'http://localhost:8000/',\r\n});\r\n\r\nfakeServerInstance.interceptors.response.use(\r\n\t(response) => {\r\n\t\tstore.dispatch({ type: 'noError' });\r\n\t\treturn response;\r\n\t},\r\n\t(response) => {\r\n\t\tstore.dispatch({\r\n\t\t\ttype: 'throwError',\r\n\t\t\tpayload: { message: response.message },\r\n\t\t});\r\n\t\tthrow new Error(response);\r\n\t}\r\n);\r\n\r\nexport default fakeServerInstance;\r\n","import fakeServerInstance from \"./instance\";\r\n\r\nexport const fetchUsers = () => fakeServerInstance.get('/users');\r\nexport const fetchUserById = (id) => fakeServerInstance.get(`/users/${id}`);","export const isLoggedIn = state => state.user.isLoggedIn;\r\nexport const loggedUserName = state => state.user.name;\r\nexport const loggedUserPassword = state => state.user.password;\r\nexport const IdUser = state => state.user.id;","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".profile__wrap{max-width:600px;background-color:rgba(255,211,0,.4509803922);padding:90px 90px;outline:1px solid #fff;box-shadow:0 0 30px rgba(255,211,0,.4509803922);margin:0 auto;display:flex;flex-direction:column;align-items:center}.profile__icon{font-size:100px}.profile__username{color:#fff;margin:20px 0;letter-spacing:.5px}.profile__change--default{display:none}.profile__change{display:flex;justify-content:center;padding:5px 10px}.profile__change--login,.profile__change--pass{padding:5px 10px;border:none;outline:none;border-radius:5px;font-size:15px}.logout__text{color:#c73333;font-size:12}.profile__menu{text-align:center}.profile__menu .profile__item{border-top:1px solid #000;font-size:17px;padding:5px 0;cursor:pointer;transition:.2s all}.profile__menu .profile__item:hover{color:#000}.profile__menu .profile__item.profile__item+.profile__item{margin-top:5px}.profile__menu .profile__item:last-child{border-bottom:1px solid #000}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/Scenes/Profile/profile.scss\"],\"names\":[],\"mappings\":\"AAAA,eACI,eAAA,CACA,4CAAA,CACA,iBAAA,CACA,sBAAA,CACA,+CAAA,CACA,aAAA,CACA,YAAA,CACA,qBAAA,CACA,kBAAA,CAGJ,eACI,eAAA,CAGJ,mBACI,UAAA,CACA,aAAA,CACA,mBAAA,CAGJ,0BACI,YAAA,CAEJ,iBACI,YAAA,CACA,sBAAA,CACA,gBAAA,CAEJ,+CACI,gBAAA,CACA,WAAA,CACA,YAAA,CACA,iBAAA,CACA,cAAA,CAGJ,cACI,aAAA,CACA,YAAA,CAGJ,eACI,iBAAA,CACA,8BACI,yBAAA,CACA,cAAA,CACA,aAAA,CACA,cAAA,CACA,kBAAA,CACA,oCACI,UAAA,CAEJ,2DACI,cAAA,CAEJ,yCACI,4BAAA\",\"sourcesContent\":[\".profile__wrap {\\r\\n    max-width: 600px;\\r\\n    background-color: #ffd30073;\\r\\n    padding: 90px 90px;\\r\\n    outline: 1px solid #fff;\\r\\n    box-shadow: 0 0 30px #ffd30073;\\r\\n    margin: 0 auto;\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    align-items: center;\\r\\n}\\r\\n\\r\\n.profile__icon {\\r\\n    font-size: 100px;\\r\\n}\\r\\n\\r\\n.profile__username {\\r\\n    color: #ffffff;\\r\\n    margin: 20px 0;\\r\\n    letter-spacing: 0.5px;\\r\\n}\\r\\n\\r\\n.profile__change--default {\\r\\n    display: none;\\r\\n}\\r\\n.profile__change {\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n    padding: 5px 10px;\\r\\n}\\r\\n.profile__change--login, .profile__change--pass {\\r\\n    padding: 5px 10px;\\r\\n    border: none;\\r\\n    outline: none;\\r\\n    border-radius: 5px;\\r\\n    font-size: 15px;\\r\\n}\\r\\n\\r\\n.logout__text {\\r\\n    color: #c73333;\\r\\n    font-size: 12;\\r\\n}\\r\\n\\r\\n.profile__menu {\\r\\n    text-align: center;\\r\\n    .profile__item {\\r\\n        border-top: 1px solid #000;\\r\\n        font-size: 17px;\\r\\n        padding: 5px 0;\\r\\n        cursor: pointer;\\r\\n        transition: 0.2s all;\\r\\n        &:hover {\\r\\n            color: #000;\\r\\n        }\\r\\n        &.profile__item + .profile__item {\\r\\n            margin-top: 5px;\\r\\n        }\\r\\n        &:last-child {\\r\\n            border-bottom: 1px solid #000;\\r\\n        }\\r\\n    }\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["props","useField","name","field","meta","touched","error","className","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","navigate","useNavigate","dispatch","useDispatch","userName","useSelector","loggedUserName","useState","handleChangeName","setHandleChangeName","handleChangePassword","setHandleChangePassword","logOut","type","PATH","validateForm","formValues","errorsObject","changeName","changePass","length","onClick","rand","Math","random","round","initialValues","validate","onSubmit","fetchUsers","then","response","findThisUser","data","find","user","axios","id","placeholder","required","password","target","href","fakeServerInstance","baseURL","interceptors","use","store","payload","message","Error","fetchUserById","isLoggedIn","state","IdUser","___CSS_LOADER_EXPORT___","push","module"],"sourceRoot":""}