{"version":3,"file":"920.ac3ba36369289c9438d7.js","mappings":"qfAgBA,QAbA,SAA0BA,GACzB,I,IAAA,G,GAA+BC,EAAAA,EAAAA,IAASD,EAAME,M,EAA9C,E,8zBAAOC,EAAP,KAAcC,EAAd,KACA,OADA,KAEC,uBAAKC,UAAU,SACd,sBAAIA,UAAU,sBAAsBL,EAAME,MAC1C,6BAAWF,EAAWG,IACrBC,EAAKE,SAAWF,EAAKG,OACrB,qBAAGF,UAAU,gBAAgBD,EAAKG,OAIrC,E,iCCdD,QAAe,IAA0B,uC,yICWrCC,EAAU,CAAC,E,87BAEfA,EAAQC,kBAAoB,IAC5BD,EAAQE,cAAgB,IAElBF,EAAQG,OAAS,SAAc,KAAM,QAE3CH,EAAQI,OAAS,IACjBJ,EAAQK,mBAAqB,IAEhB,IAAI,IAASL,GAKJ,KAAW,YAAiB,WC8ElD,QA9FA,WAcI,IAAMM,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,MACjB,KAAwBC,EAAAA,EAAAA,WAAS,GAAjC,GAAOC,EAAP,KAAaC,EAAb,KACA,KAAkCF,EAAAA,EAAAA,UAAS,IAA3C,GAAOG,EAAP,KAAkBC,EAAlB,KAEMC,EAAsC,CACxCrB,KAAM,GACNsB,MAAO,GACPC,SAAU,GACVC,GAAIC,KAAKC,MAAsB,IAAhBD,KAAKE,WAiCxB,OACI,gBAAC,WAAD,KACI,gBAAC,KAAD,CAAQC,cAAeP,EAAmBQ,SAhC7B,SAACC,GAClB,IACIC,EAAoC,CAAC,EAyB5B,OAvBTD,EAAW9B,MAASiB,IAEpBc,EAAa/B,KAAO,+BAErB8B,EAAW9B,KAAKgC,SAAS,OAExBD,EAAa/B,KAAO,qCAErB8B,EAAW9B,KAAKiC,OAAS,KAExBF,EAAa/B,KAAO,0CAEpB8B,EAAWR,QAEXS,EAAaT,MAAQ,+BAEtBQ,EAAWP,SAASU,OAAS,IAE5BF,EAAaR,SAAW,8CAKRQ,CACvB,EAIyEG,SAAU,SAACJ,GAEzEK,IAAAA,KAAA,gCAAoClB,EAAO,QAAU,SAAY,CAC7DjB,KAAM8B,EAAW9B,KACjBsB,MAAOQ,EAAWR,MAClBC,SAAUO,EAAWP,SACrBa,WAAY,GACZZ,GAAIM,EAAWN,KAChBa,MAAK,YACJC,EAAAA,EAAAA,KAAaD,MAAK,SAAAE,GACd,IAAMC,EAAWD,EAASE,KAAKC,MAAK,SAACC,GAAD,OAA8BA,EAAKrB,QAAUQ,EAAWR,KAAxD,IACpCV,EAAS,CAACgC,KAAM,YAAaC,QAAS,CAAC7C,KAAMiB,EAAOuB,EAASxC,KAAO8B,EAAW9B,KAAMuB,SAAUO,EAAWP,SAAUC,GAAIP,EAAOuB,EAAShB,GAAKM,EAAWN,MACxJV,EAAS,IACZ,GACJ,IAZD,OAYS,SAAAT,GAAK,OAAIA,GAASe,EAAaf,EAAMkC,SAASE,KAAzC,GAEjB,GACG,uBAAKtC,UAAU,uBACX,uBAAK2C,IAAKC,EAAQC,IAAI,GAAG7C,UAAU,kBACnC,sBAAIA,UAAU,gBAAgBc,EAAO,mBAAqB,mBAC1D,gBAAC,KAAD,CAAMd,UAAU,gBACVc,GAAQ,gBAAC,EAAD,CAAkBjB,KAAK,OAAO4C,KAAK,OAAOK,YAAY,eAAeC,UAAQ,EAAC/C,UAAU,gBAClG,gBAAC,EAAD,CAAkBH,KAAK,QAAQ4C,KAAK,QAAQK,YAAY,wBAAwBC,UAAQ,EAAC/C,UAAU,iBACnG,gBAAC,EAAD,CAAkBH,KAAK,WAAW4C,KAAK,WAAWM,UAAQ,EAAC/C,UAAU,cAAc8C,YAAY,WAC/F,uBAAK9C,UAAU,sBACX,0BAAQA,UAAU,gBAAgByC,KAAM,UAAW3B,EAAO,QAAU,WACpE,qBAAGd,UAAU,gBAAgBgD,QAAS,kBAAMjC,GAASD,EAAf,GAAuBA,EAAO,uBAAyB,0BAGhGE,GAAa,sBAAIhB,UAAU,uBAAuBgB,KAK1E,C,kECnGKiC,EAAqBjB,IAAAA,OAAa,CACvCkB,QAAS,2BAGVD,EAAmBE,aAAaf,SAASgB,KACxC,SAAChB,GAEA,OADAiB,EAAAA,EAAAA,SAAe,CAAEZ,KAAM,YAChBL,CACP,IACD,SAACA,GAKA,MAJAiB,EAAAA,EAAAA,SAAe,CACdZ,KAAM,aACNC,QAAS,CAAEY,QAASlB,EAASkB,WAExB,IAAIC,MAAMnB,EAChB,IAGF,S,wDCnBaD,EAAa,kBAAMc,EAAAA,EAAAA,IAAuB,SAA7B,EACbO,EAAgB,SAACnC,GAAD,OAAQ4B,EAAAA,EAAAA,IAAA,iBAAiC5B,GAAzC,C,mECAzBoC,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOtC,GAAI,qkCAAskC,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,+CAA+C,MAAQ,GAAG,SAAW,onBAAonB,eAAiB,CAAC,mtDAAmtD,WAAa,MAErjH,S","sources":["webpack://tms-part-3/./src/Components/FormikInputs/LoginFormikInput.jsx","webpack://tms-part-3/./src/assets/images/leaves.png","webpack://tms-part-3/./src/Scenes/Login/loginPage.scss?41db","webpack://tms-part-3/./src/Scenes/Login/LoginPage.tsx","webpack://tms-part-3/./src/api/instance.js","webpack://tms-part-3/./src/api/userApi.js","webpack://tms-part-3/./src/Scenes/Login/loginPage.scss"],"sourcesContent":["import React from 'react';\r\nimport { useField } from 'formik';\r\n\r\nfunction LoginFormikInput(props) {\r\n\tconst [field, meta, helpers] = useField(props.name);\r\n\treturn (\r\n\t\t<div className='field'>\r\n\t\t\t<h5 className='login__title-field'>{props.name}</h5>\r\n\t\t\t<input {...props} {...field} />\r\n\t\t\t{meta.touched && meta.error && (\r\n\t\t\t\t<p className='field__error'>{meta.error}</p>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default LoginFormikInput;","export default __webpack_public_path__ + \"4653574d441b9600650466a4cada631e.png\";","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./loginPage.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./loginPage.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Formik, Form } from 'formik';\r\nimport LoginFormikInput from '@src/Components/FormikInputs/LoginFormikInput';\r\nimport { useDispatch } from 'react-redux';\r\nimport axios from 'axios';\r\nimport  leaves  from '@src/assets/images/leaves.png';\r\nimport { fetchUsers } from '@src/api/userApi';\r\nimport './loginPage.scss';\r\n\r\nfunction LoginPage():JSX.Element {\r\n    \r\n    type LoginPageFormData = {\r\n        name: string,\r\n        email: string,\r\n        password: string,\r\n        id: string | number,\r\n    }\r\n    type LoginPageErrorsData = {\r\n        name?: string,\r\n        email?: string,\r\n        password?: string,\r\n    }\r\n    \r\n    const dispatch = useDispatch();\r\n    const navigate = useNavigate();\r\n    const [auth, setAuth] = useState(true);\r\n    const [authError, setAuthError] = useState('');\r\n    \r\n    const initialFormValues:LoginPageFormData = {\r\n        name: '',\r\n        email: '',\r\n        password: '',\r\n        id: Math.round(Math.random() * 1000),\r\n    }\r\n    \r\n    const validateForm = (formValues:LoginPageFormData):LoginPageErrorsData | void => {\r\n        let isValid = true;\r\n        let errorsObject: LoginPageErrorsData = {};\r\n\r\n        if(!formValues.name && !auth) {\r\n            isValid = false;\r\n            errorsObject.name = 'Поле не должно быть пустым!';\r\n        }\r\n        if(formValues.name.includes(' ')) {\r\n            isValid = false;\r\n            errorsObject.name = 'Поле не должно содержать пробелы!';\r\n        }\r\n        if(formValues.name.length > 11) {\r\n            isValid = false;\r\n            errorsObject.name = 'Имя не должно быть длиннее 11 символов';\r\n        }\r\n        if(!formValues.email) {\r\n            isValid = false;\r\n            errorsObject.email = 'Поле не должно быть пустым!';\r\n        }\r\n        if(formValues.password.length < 5) {\r\n            isValid = false;\r\n            errorsObject.password = 'Пароль должен содержать больше 5 символов!';\r\n        }\r\n\r\n        isValid = false;\r\n\r\n        if(!isValid) return errorsObject\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Formik initialValues={initialFormValues} validate={validateForm} onSubmit={(formValues: { name: string; email: string; password: string; id: string | number;}) => {\r\n                \r\n                axios.post(`http://localhost:8000/${auth ? 'login' : 'users'}`,  {\r\n                    name: formValues.name, \r\n                    email: formValues.email,\r\n                    password: formValues.password,\r\n                    likedBooks: [],\r\n                    id: formValues.id,\r\n                }).then(() => {\r\n                    fetchUsers().then(response => {\r\n                        const findUser = response.data.find((mail: { email: string; }) => mail.email === formValues.email);\r\n                        dispatch({type: 'userLogIn', payload: {name: auth ? findUser.name : formValues.name, password: formValues.password, id: auth ? findUser.id : formValues.id}});\r\n                        navigate('/');\r\n                    }) \r\n                }).catch(error => error && setAuthError(error.response.data));\r\n                \r\n            }}>\r\n                <div className='login__card-wrapper'>\r\n                    <img src={leaves} alt='' className='login__leaves' />\r\n                    <h3 className='login__title'>{auth ? 'Входим в аккаунт' : 'Создаем аккаунт'}</h3>\r\n                    <Form className='login__card'>\r\n                        {!auth && <LoginFormikInput name='name' type='text' placeholder='крутойЧел228' required className='login__name' />}\r\n                        <LoginFormikInput name='email' type='email' placeholder='vasyapupkin@gmail.com' required className='login__email' />\r\n                        <LoginFormikInput name='password' type='password' required className='login__pass' placeholder='пароль' />\r\n                        <div className='login__footer-card'>\r\n                            <button className='login__submit' type={'submit'}>{auth ? 'Войти' : 'Создать'}</button>\r\n                            <p className='login__forgot' onClick={() => setAuth(!auth)}>{auth ? 'У меня нет аккаунта!' : 'У меня есть аккаунт!'}</p>\r\n                        </div>\r\n                    </Form>\r\n                        {authError && <h4 className='success__auth-title'>{authError}</h4>}\r\n                </div>\r\n            </Formik>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default LoginPage;","import axios from 'axios';\r\nimport { store } from '@src/store/initStore';\r\n\r\nconst fakeServerInstance = axios.create({\r\n\tbaseURL: 'http://localhost:8000/',\r\n});\r\n\r\nfakeServerInstance.interceptors.response.use(\r\n\t(response) => {\r\n\t\tstore.dispatch({ type: 'noError' });\r\n\t\treturn response;\r\n\t},\r\n\t(response) => {\r\n\t\tstore.dispatch({\r\n\t\t\ttype: 'throwError',\r\n\t\t\tpayload: { message: response.message },\r\n\t\t});\r\n\t\tthrow new Error(response);\r\n\t}\r\n);\r\n\r\nexport default fakeServerInstance;\r\n","import fakeServerInstance from '@src/api/instance';\r\n\r\nexport const fetchUsers = () => fakeServerInstance.get('/users');\r\nexport const fetchUserById = (id) => fakeServerInstance.get(`/users/${id}`);","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".login__title{font-size:50px;margin-bottom:40px;color:#000;letter-spacing:.5px;text-align:center}.login__card-wrapper{min-width:450px;min-height:350px;border-radius:10px;border:3px solid #000;background-color:#fff;padding:25px 30px;display:flex;justify-content:space-around;align-items:center;flex-direction:column}.login__card{width:100%;z-index:5}.login__name,.login__email,.login__pass{width:100%;padding:10px 15px;font-size:20px}.field{position:relative;margin-bottom:20px}.field__error{color:#c21717}.login__title-field{position:absolute;top:-9px;left:7px;z-index:2;color:#000;background-color:#fff}.success__auth-title{margin:0 10px;font-size:19px;color:#d42d2d;letter-spacing:.5px}.login__footer-card{display:flex;justify-content:space-between;align-items:center}.login__forgot{text-decoration:underline;cursor:pointer;color:#5900ff}.login__submit{padding:10px 15px;border-radius:5px;font-size:25px;margin:0 10px;background-color:#ecde0f;cursor:pointer;font-weight:bold}.login__submit:hover{color:#fff}.login__leaves{position:absolute;top:0;left:0;z-index:2;width:100vw;height:100vh}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/Scenes/Login/loginPage.scss\"],\"names\":[],\"mappings\":\"AAAA,cACI,cAAA,CACA,kBAAA,CACA,UAAA,CACA,mBAAA,CACA,iBAAA,CAGJ,qBACI,eAAA,CACA,gBAAA,CACA,kBAAA,CACA,qBAAA,CACA,qBAAA,CACA,iBAAA,CACA,YAAA,CACA,4BAAA,CACA,kBAAA,CACA,qBAAA,CAGJ,aACI,UAAA,CACA,SAAA,CAGJ,wCACI,UAAA,CACA,iBAAA,CACA,cAAA,CAGJ,OACI,iBAAA,CACA,kBAAA,CAGJ,cACI,aAAA,CAGJ,oBACI,iBAAA,CACA,QAAA,CACA,QAAA,CACA,SAAA,CACA,UAAA,CACA,qBAAA,CAGJ,qBACI,aAAA,CACA,cAAA,CACA,aAAA,CACA,mBAAA,CAGJ,oBACI,YAAA,CACA,6BAAA,CACA,kBAAA,CAGJ,eACI,yBAAA,CACA,cAAA,CACA,aAAA,CAGJ,eACI,iBAAA,CACA,iBAAA,CACA,cAAA,CACA,aAAA,CACA,wBAAA,CACA,cAAA,CACA,gBAAA,CACA,qBACI,UAAA,CAIR,eACI,iBAAA,CACA,KAAA,CACA,MAAA,CACA,SAAA,CACA,WAAA,CACA,YAAA\",\"sourcesContent\":[\".login__title {\\r\\n    font-size: 50px;\\r\\n    margin-bottom: 40px;\\r\\n    color: #000000;\\r\\n    letter-spacing: 0.5px;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n.login__card-wrapper {\\r\\n    min-width: 450px;\\r\\n    min-height: 350px;\\r\\n    border-radius: 10px;\\r\\n    border: 3px solid #000;\\r\\n    background-color: #fff;\\r\\n    padding: 25px 30px;\\r\\n    display: flex;\\r\\n    justify-content: space-around;\\r\\n    align-items: center;\\r\\n    flex-direction: column;\\r\\n}\\r\\n\\r\\n.login__card {\\r\\n    width: 100%;\\r\\n    z-index: 5;\\r\\n}\\r\\n\\r\\n.login__name, .login__email, .login__pass {\\r\\n    width: 100%;\\r\\n    padding: 10px 15px;\\r\\n    font-size: 20px;\\r\\n}\\r\\n\\r\\n.field {\\r\\n    position: relative;\\r\\n    margin-bottom: 20px;\\r\\n}\\r\\n\\r\\n.field__error {\\r\\n    color: #c21717;\\r\\n}\\r\\n\\r\\n.login__title-field {\\r\\n    position: absolute;\\r\\n    top: -9px;\\r\\n    left: 7px;\\r\\n    z-index: 2;\\r\\n    color: #000;\\r\\n    background-color: #fff;\\r\\n}\\r\\n\\r\\n.success__auth-title {\\r\\n    margin: 0 10px;\\r\\n    font-size: 19px;\\r\\n    color: #d42d2d;\\r\\n    letter-spacing: 0.5px;\\r\\n}\\r\\n\\r\\n.login__footer-card {\\r\\n    display: flex;\\r\\n    justify-content: space-between;\\r\\n    align-items: center;\\r\\n}\\r\\n\\r\\n.login__forgot {\\r\\n    text-decoration: underline;\\r\\n    cursor: pointer;\\r\\n    color: #5900ff;\\r\\n}\\r\\n\\r\\n.login__submit {\\r\\n    padding: 10px 15px;\\r\\n    border-radius: 5px;\\r\\n    font-size: 25px;\\r\\n    margin: 0 10px;\\r\\n    background-color: #ecde0f;\\r\\n    cursor: pointer;\\r\\n    font-weight: bold;\\r\\n    &:hover {\\r\\n        color: #fff;\\r\\n    }\\r\\n}\\r\\n\\r\\n.login__leaves {\\r\\n    position: absolute;\\r\\n    top: 0;\\r\\n    left: 0;\\r\\n    z-index: 2;\\r\\n    width: 100vw;\\r\\n    height: 100vh;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["props","useField","name","field","meta","className","touched","error","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","dispatch","useDispatch","navigate","useNavigate","useState","auth","setAuth","authError","setAuthError","initialFormValues","email","password","id","Math","round","random","initialValues","validate","formValues","errorsObject","includes","length","onSubmit","axios","likedBooks","then","fetchUsers","response","findUser","data","find","mail","type","payload","src","leaves","alt","placeholder","required","onClick","fakeServerInstance","baseURL","interceptors","use","store","message","Error","fetchUserById","___CSS_LOADER_EXPORT___","push","module"],"sourceRoot":""}